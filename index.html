<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Simulador Claro Up â€“ V3.0 Oficial</title>
<style>
:root{
  --claro-red:#e60000; --claro-red-dark:#c80000;
  --bg:#f4f5f7; --card:#fff; --text:#111827; --muted:#64748b;
  --border:#e5e7eb; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,0.08);
  /* Cores dos Setores (Esquerda) */
  --c-plano:#f0f7ff; --c-troca:#f0fff4; --c-oferta:#fff5f5; --c-outros:#fffbeb; --c-acessorios:#f8fafc;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text)}

.topbar{background:var(--claro-red);color:#fff;padding:14px 16px;position:sticky;top:0;z-index:100;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.topbar .row{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}

main{max-width:1200px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:1fr;gap:20px}
@media(min-width:1024px){ main{grid-template-columns:1.05fr 0.95fr} }

/* LADO ESQUERDO: SETORES COLORIDOS */
.sector-card{border-radius:var(--radius);border:1px solid var(--border);margin-bottom:16px;background:var(--card);box-shadow:var(--shadow);overflow:hidden}
.sector-hd{padding:12px 16px;font-weight:800;font-size:13px;text-transform:uppercase;border-bottom:1px solid rgba(0,0,0,0.05)}
.sector-bd{padding:16px}

.s-plano{background:var(--c-plano)}.s-plano .sector-hd{color:#0284c7}
.s-troca{background:var(--c-troca)}.s-troca .sector-hd{color:#16a34a}
.s-oferta{background:var(--c-oferta)}.s-oferta .sector-hd{color:var(--claro-red)}
.s-outros{background:var(--c-outros)}.s-outros .sector-hd{color:#d97706}
.s-acessorios{background:var(--c-acessorios)}.s-acessorios .sector-hd{color:#475569}

.field-group{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
@media(max-width:600px){ .field-group{grid-template-columns:1fr} }
.field{display:flex;flex-direction:column;gap:4px;margin-bottom:10px}
label{font-size:11px;font-weight:700;color:var(--muted);text-transform:uppercase}
input, select, textarea{padding:10px;border:1px solid var(--border);border-radius:10px;font-size:15px;background:#fff}

/* ACESSÃ“RIOS */
.acessorio-row{display:flex;gap:8px;margin-bottom:8px;align-items:center}
.btn-plus{background:var(--claro-red);color:#fff;border:none;border-radius:50%;width:26px;height:26px;cursor:pointer;font-weight:bold}

/* LADO DIREITO: RESULTADO E COMPARATIVO (FIEL AO PRINT 1) */
.results-column{display:flex;flex-direction:column;gap:12px}
@media(min-width:1024px){ .results-column{position:sticky;top:80px;height:fit-content} }

.res-container{background:#fff;border-radius:var(--radius);border:1px solid var(--border);box-shadow:var(--shadow);padding:16px}
.res-title{font-weight:800;font-size:18px;margin-bottom:15px}

.badge-row{display:flex;gap:10px;margin-bottom:20px}
.badge-box{border:1px dashed var(--claro-red);padding:8px 12px;border-radius:10px;color:var(--claro-red);font-size:13px;font-weight:800;display:flex;align-items:center;gap:6px}

.k-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:15px}
@media(max-width:500px){ .k-grid{grid-template-columns:1fr} }

.k-box{border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff}
.k-label{font-size:11px;font-weight:700;color:var(--muted);line-height:1.2;margin-bottom:5px;display:block}
.k-val{font-size:20px;font-weight:900;color:#111827}
.k-sub{font-size:10px;color:var(--muted);margin-top:4px;display:block;line-height:1.3}

/* Cards de Economia (Fiel ao print) */
.eco-card{border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:12px;background:#fff}
.eco-label{font-size:12px;font-weight:800;color:var(--muted);margin-bottom:8px;display:block}
.eco-val{font-size:24px;font-weight:900;color:var(--claro-red);display:block;margin-bottom:5px}
.eco-footer{font-size:11px;color:var(--muted);border-top:1px solid #eee;padding-top:8px;margin-top:8px}

.footer-full{grid-column:1/-1;background:#fff;padding:25px;border-radius:var(--radius);border:1px solid var(--border);text-align:center;margin-top:20px}
.btn-whatsapp{background:#25d366;color:#fff;border:none;padding:16px 40px;border-radius:999px;font-weight:800;cursor:pointer;font-size:16px;box-shadow:0 4px 12px rgba(37,211,102,0.3)}
</style>
</head>
<body>

<div class="topbar">
    <div class="row">
        <div class="brand">Simulador Claro Up â€“ V3.0</div>
        <div id="clock" style="font-size:13px; font-weight:bold"></div>
    </div>
</div>

<main>
    <div class="inputs-column">
        
        <div class="sector-card s-plano">
            <div class="sector-hd">1. Plano Atual do Cliente</div>
            <div class="sector-bd">
                <div class="field"><label>Plano atual do cliente (texto)</label><input id="planoAtualNome" type="text" placeholder="Ex: Claro Multi 100GB"></div>
                <div class="field-group">
                    <div class="field"><label>PreÃ§o do plano (R$ / mÃªs)</label><input id="planoAtualPreco" inputmode="decimal"></div>
                    <div class="field"><label>Dependentes pagos (Qtd)</label><input id="depPagos" type="number"></div>
                    <div class="field"><label>Dependentes grÃ¡tis (Qtd)</label><input id="depGratis" type="number"></div>
                    <div class="field"><label>Seguro Aparelho Atual (R$ / mÃªs)</label><input id="seguroInteresse" inputmode="decimal"></div>
                    <div class="field"><label>Claro Clube (Abatimento R$)</label><input id="claroClube" inputmode="decimal"></div>
                    <div class="field"><label>Valor total plano atual</label><input id="totalPlanoAtual" readonly style="background:#f8fafc;font-weight:900"></div>
                </div>
            </div>
        </div>

        <div class="sector-card s-troca">
            <div class="sector-hd">2. Troca Fone</div>
            <div class="sector-bd">
                <div class="field-group">
                    <div class="field"><label>Modelo Aparelho Troca</label><input id="modeloTroca" type="text"></div>
                    <div class="field"><label>Incentivo Claro Troca (R$)</label><input id="incentivoTroca" inputmode="decimal"></div>
                </div>
            </div>
        </div>

        <div class="sector-card s-oferta">
            <div class="sector-hd">3. Valores de Aparelho (Claro Up)</div>
            <div class="sector-bd">
                <div class="field">
                    <label>Modelo do iPhone Ofertado (Claro Up)</label>
                    <select id="modeloOferta">
                        <option value="">Selecione...</option>
                        <optgroup label="iPhone 17">
                            <option>iPhone 17 256GB</option><option>iPhone 17 512GB</option>
                        </optgroup>
                        <optgroup label="iPhone Air">
                            <option>iPhone Air 256GB</option><option>iPhone Air 512GB</option><option>iPhone Air 1TB</option>
                        </optgroup>
                        <optgroup label="iPhone 17 Pro">
                            <option>iPhone 17 Pro 256GB</option><option>iPhone 17 Pro 512GB</option><option>iPhone 17 Pro 1TB</option>
                        </optgroup>
                        <optgroup label="iPhone 17 Pro Max">
                            <option>iPhone 17 Pro Max 256GB</option><option>iPhone 17 Pro Max 512GB</option><option>iPhone 17 Pro Max 1TB</option><option>iPhone 17 Pro Max 2TB</option>
                        </optgroup>
                    </select>
                </div>
                <div class="field-group">
                    <div class="field"><label>PrÃ©-pago â€“ Total (R$)</label><input id="prePagoTotal" inputmode="decimal"></div>
                    <div class="field"><label>Multi â€“ Total (R$)</label><input id="multiTotal" inputmode="decimal"></div>
                    <div class="field"><label>Multi + Claro Up â€“ Total (R$)</label><input id="claroUpTotal" inputmode="decimal"></div>
                    <div class="field"><label>Residual Claro Up (R$)</label><input id="residual" inputmode="decimal"></div>
                </div>
                <div class="field">
                    <label>Parcelamento</label>
                    <select id="parcelasSel">
                        <option value="12">12x</option><option value="21" selected>21x</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="sector-card s-outros">
            <div class="sector-hd">4. Outra opÃ§Ã£o de aparelho no plano atual</div>
            <div class="sector-bd">
                <div class="field-group">
                    <div class="field"><label>Aparelho de interesse</label><input id="modeloInteresse" type="text"></div>
                    <div class="field"><label>Valor Total (R$)</label><input id="totalInteresse" inputmode="decimal"></div>
                </div>
            </div>
        </div>

        <div class="sector-card s-acessorios">
            <div class="sector-hd">5. AcessÃ³rios</div>
            <div class="sector-bd">
                <div id="acessoriosContainer"><div class="acessorio-row">
                    <input type="text" placeholder="AcessÃ³rio" class="ace-nome">
                    <input type="number" placeholder="R$" class="ace-preco" style="width:90px" oninput="recalc()">
                    <button class="btn-plus" onclick="addAcessorio()">+</button>
                </div></div>
                <div style="margin-top:15px; font-weight:900; display:flex; justify-content:space-between; border-top:1px solid #eee; padding-top:10px">
                    <span>VALOR TOTAL ACESSÃ“RIOS:</span><span id="totalAcessorios">R$ 0,00</span>
                </div>
            </div>
        </div>
    </div>

    <div class="results-column">
        <div class="res-container">
            <div class="res-title">Resultado e comparativo</div>
            <div class="badge-row">
                <div class="badge-box">â˜† Claro Up (seguro grÃ¡tis)</div>
                <div class="badge-box">âŸ² Claro Troca (abatimento)</div>
            </div>

            <div class="k-grid">
                <div class="k-box">
                    <span class="k-label">Valor total do plano atual (plano + dependentes + seguro)</span>
                    <div class="k-val" id="outPlanoMensalAtual">R$ 0,00</div>
                    <span class="k-sub" id="outPlanoDet">Plano: R$ 0 | Dep: 0 | Seg: R$ 0</span>
                </div>
                <div class="k-box">
                    <span class="k-label">PrÃ©-pago â€“ parcela no cartÃ£o</span>
                    <div class="k-val" id="outPrePagoParc">R$ 0,00</div>
                    <span class="k-sub">PrÃ©-pago total Ã· parcelas</span>
                </div>
                <div class="k-box">
                    <span class="k-label">Multi â€“ parcela no cartÃ£o (com ProteÃ§Ã£o MÃ³vel)</span>
                    <div class="k-val" id="outMultiParc">R$ 60,00</div>
                    <span class="k-sub">R$60 do seguro vem cobrado na fatura do cliente.</span>
                </div>
                <div class="k-box">
                    <span class="k-label">Multi + Claro Up â€“ parcela no cartÃ£o</span>
                    <div class="k-val" id="outUpParc">R$ 0,00</div>
                    <span class="k-sub">Seguro ProteÃ§Ã£o MÃ³vel grÃ¡tis.</span>
                </div>
                <div class="k-box">
                    <span class="k-label">Multi + Claro Up + Claro Troca â€“ parcela no cartÃ£o</span>
                    <div class="k-val" id="outUpTrocaParc">R$ 0,00</div>
                    <span class="k-sub">(Total âˆ’ incentivo) Ã· parcelas</span>
                </div>
                <div class="k-box">
                    <span class="k-label">Plano atual â€“ parcela do aparelho (com seguro atual)</span>
                    <div class="k-val" id="outInteresseParc">R$ 0,00</div>
                    <span class="k-sub">(Aparelho Ã· parcelas) + seguro atual</span>
                </div>
            </div>

            <div class="eco-card">
                <span class="eco-label">Economia na parcela do cartÃ£o por mÃªs e ProteÃ§Ã£o mÃ³vel â€” Multi vs Multi + Claro Up (sem troca)</span>
                <span class="eco-val" id="outEcoMensal">R$ 60,00</span>
                <div class="eco-footer">
                    <strong>Economia total fazendo Claro Multi com Claro Up (sem troca)</strong><br>
                    <span id="outEcoTotalAparelho" style="font-size: 16px; color: var(--claro-red); font-weight: 900;">R$ 1.260,00</span>
                </div>
            </div>

            <div class="eco-card">
                <span class="eco-label">Economia na parcela do cartÃ£o por mÃªs â€” com TrocaFone (Claro Troca)</span>
                <span class="eco-val" id="outEcoTrocaMensal">R$ 60,00</span>
                <span class="k-sub">CÃ¡lculo: (Multi Ã· parcelas) âˆ’ ((Multi+Up âˆ’ incentivo) Ã· parcelas)</span>
            </div>

            <div class="eco-card">
                <span class="eco-label" style="font-size: 10px;">ECONOMIA NO VALOR TOTAL DO APARELHO SE O CLIENTE FIZER O UP GRADE...</span>
                <div style="display:flex; justify-content:space-between; margin-bottom:5px">
                    <span><b>ECONOMIA no CLARO UP Sem TrocaFone</b></span>
                    <span id="outEcoTotalSem" class="eco-val" style="font-size:16px">R$ 1.260,00</span>
                </div>
                <div style="display:flex; justify-content:space-between">
                    <span><b>Com TrocaFone</b></span>
                    <span id="outEcoTotalCom" class="eco-val" style="font-size:16px">R$ 1.260,00</span>
                </div>
                <div class="eco-footer">Obs: R$60 do seguro x 21 parcelas = R$ 1.260,00.</div>
            </div>

            <div class="k-box">
                <span class="k-label">Residual Claro Up (custo futuro no 22Âº mÃªs se nÃ£o renovar)</span>
                <div class="k-val" id="outResidual">R$ 0,00</div>
                <span class="k-sub">Pode quitar Ã  vista ou parcelar em atÃ© 12x apÃ³s o 21Âº mÃªs.</span>
            </div>
        </div>
    </div>

    <div class="footer-full">
        <button class="btn-whatsapp" onclick="copiar()">Copiar Resumo (WhatsApp)</button>
        <div class="field" style="max-width:600px; margin:20px auto 10px; text-align:left">
            <label>ObservaÃ§Ãµes da Proposta</label>
            <textarea id="obs" rows="3"></textarea>
        </div>
        <div class="timestamp" id="msgValidade"></div>
    </div>
</main>

<script>
const $ = (id) => document.getElementById(id);
const brl = (v) => Number(v).toLocaleString("pt-BR", { style:"currency", currency:"BRL" });

function addAcessorio() {
    const div = document.createElement("div");
    div.className = "acessorio-row";
    div.innerHTML = `<input type="text" placeholder="AcessÃ³rio" class="ace-nome">
                     <input type="number" placeholder="R$" class="ace-preco" style="width:90px" oninput="recalc()">
                     <button class="btn-plus" style="background:#64748b" onclick="this.parentElement.remove(); recalc()">-</button>`;
    $("acessoriosContainer").appendChild(div);
}

function parseVal(id) {
    let v = $(id).value.replace(/\./g, '').replace(',', '.');
    return parseFloat(v) || 0;
}

function recalc() {
    const parcelas = parseInt($("parcelasSel").value);
    const planoPreco = parseVal("planoAtualPreco");
    const depPagos = parseInt($("depPagos").value) || 0;
    const seguroAtual = parseVal("seguroInteresse");
    const clube = parseVal("claroClube");

    // 1. CÃ¡lculo Plano
    const totalPlano = planoPreco + (depPagos * 50) + seguroAtual;
    $("totalPlanoAtual").value = brl(totalPlano);
    $("outPlanoMensalAtual").textContent = brl(totalPlano);
    $("outPlanoDet").textContent = `Plano: ${brl(planoPreco)} | Dep: ${depPagos} | Seg: ${brl(seguroAtual)}`;

    // 2. Aparelhos
    const prePago = parseVal("prePagoTotal");
    const multi = Math.max(0, parseVal("multiTotal") - clube);
    const up = Math.max(0, parseVal("claroUpTotal") - clube);
    const incentivo = parseVal("incentivoTroca");
    const residual = parseVal("residual");

    $("outPrePagoParc").textContent = brl(prePago / parcelas);
    $("outMultiParc").textContent = brl((multi / parcelas) + 60);
    $("outUpParc").textContent = brl(up / parcelas);
    $("outUpTrocaParc").textContent = brl(Math.max(0, up - incentivo) / parcelas);
    
    const interesseTotal = parseVal("totalInteresse");
    $("outInteresseParc").textContent = brl((interesseTotal / parcelas) + seguroAtual);

    // 3. Economias (Fiel ao print 1)
    const ecoMensal = ((multi/parcelas)+60) - (up/parcelas);
    $("outEcoMensal").textContent = brl(ecoMensal);
    $("outEcoTotalAparelho").textContent = brl(ecoMensal * parcelas);

    const ecoTrocaMensal = ((multi/parcelas)+60) - (Math.max(0, up - incentivo)/parcelas);
    $("outEcoTrocaMensal").textContent = brl(ecoTrocaMensal);

    const ecoTotalSem = (multi + (60 * parcelas)) - up;
    const ecoTotalCom = (multi + (60 * parcelas)) - (up - incentivo);
    $("outEcoTotalSem").textContent = brl(ecoTotalSem);
    $("outEcoTotalCom").textContent = brl(ecoTotalCom);

    $("outResidual").textContent = brl(residual);

    // 4. AcessÃ³rios
    let totalAce = 0;
    document.querySelectorAll(".ace-preco").forEach(el => totalAce += parseFloat(el.value) || 0);
    $("totalAcessorios").textContent = brl(totalAce);

    const agora = new Date();
    $("msgValidade").textContent = `Esta simulaÃ§Ã£o Ã© vÃ¡lida apenas para a data: ${agora.toLocaleDateString()} Ã s ${agora.toLocaleTimeString()}`;
}

function copiar() {
    const agora = new Date();
    let txt = `*SIMULAÃ‡ÃƒO CLARO UP*\n`;
    txt += `ðŸ“… ${agora.toLocaleDateString()} Ã s ${agora.toLocaleTimeString()}\n\n`;
    txt += `ðŸ“± *Aparelho:* ${$("modeloOferta").value}\n`;
    txt += `ðŸ’³ *Parcela Up:* ${$("outUpParc").textContent}\n`;
    if(parseVal("incentivoTroca") > 0) txt += `â™»ï¸ *Com Troca:* ${$("outUpTrocaParc").textContent}\n`;
    txt += `\n*AcessÃ³rios:* ${$("totalAcessorios").textContent}\n`;
    txt += `\n*Obs:* ${$("obs").value}`;
    navigator.clipboard.writeText(txt).then(() => alert("Resumo copiado!"));
}

setInterval(() => { $("clock").textContent = new Date().toLocaleTimeString(); }, 1000);
document.querySelectorAll("input, select, textarea").forEach(el => el.addEventListener("input", recalc));
window.onload = recalc;
</script>
</body>
</html>
